import{u as I,_ as $,a as j}from"./index-r-pUqtUt.js";import{i as o,q as d,ae as G,f as c,j as m,k as f,x as l,t as u,n as r,F as B,l as k,v as P,A as H,d as x,s as V,af as O,a as _,c as U,w as W,ag as q,J as z,B as J}from"./vue-blgNmdmJ.js";import"./kongponents-T_dz3z7y.js";const Q={xmlns:"http://www.w3.org/2000/svg",width:"263",height:"144",fill:"none"},X=G('<rect width="100" height="120" x="163" y="24" fill="var(--section_colors-tertiary)" rx="8"></rect><rect width="98" height="118" x="164" y="25" stroke="var(--section_colors-stroke)" stroke-dasharray="8 4" stroke-linejoin="round" stroke-width="2" rx="7"></rect><rect width="100" height="120" y="24" fill="var(--section_colors-tertiary)" rx="8"></rect><rect width="98" height="118" x="1" y="25" stroke="var(--section_colors-stroke)" stroke-dasharray="8 4" stroke-linejoin="round" stroke-width="2" rx="7"></rect><g filter="url(#a)"><rect width="100" height="120" x="81" y="2" fill="var(--section_colors-tertiary)" rx="8"></rect><rect width="98" height="118" x="82" y="3" stroke="var(--section_colors-stroke)" stroke-dasharray="8 4" stroke-linejoin="round" stroke-width="2" rx="7"></rect></g><path fill="var(--section_colors-stroke)" d="M128.911 68.506c.028-1.6.217-2.864.566-3.793.35-.927 1.062-1.956 2.138-3.086l2.746-2.724c1.174-1.278 1.761-2.65 1.761-4.115 0-1.413-.384-2.516-1.153-3.31-.768-.806-1.886-1.21-3.354-1.21-1.425 0-2.571.364-3.437 1.09-.867.726-1.3 1.701-1.3 2.925H123c.028-2.179.831-3.934 2.411-5.266 1.593-1.345 3.661-2.017 6.204-2.017 2.641 0 4.696.686 6.163 2.058 1.481 1.358 2.222 3.228 2.222 5.608 0 2.354-1.132 4.674-3.396 6.96l-2.285 2.18c-1.02 1.09-1.53 2.656-1.53 4.7h-3.878zm-.167 6.396c0-.605.188-1.11.565-1.513.392-.417.965-.626 1.719-.626.755 0 1.328.209 1.719.626.392.403.587.908.587 1.513 0 .605-.195 1.11-.587 1.513-.391.39-.964.585-1.719.585-.754 0-1.327-.195-1.719-.585-.377-.404-.565-.908-.565-1.513z"></path><defs><filter id="a" width="108" height="128" x="77" y="0" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow"></feBlend><feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"></feBlend></filter></defs>',7),Y=[X];function Z(e,t){return o(),d("svg",Q,[...Y])}const ee={render:Z},te={name:"CatalogItem",props:{product:{type:Object,default:()=>{}},loading:{type:Boolean,default:!1}},data(){return{helpText:I().state.helpText.catalogItem}},computed:{version(){return this.product.latestVersion},versionLabel(){return this.product.versionCount===1?"Version: ":"Versions: "}}},ae={key:0,class:"products-card-title"},oe={class:"products-card-title truncate"},se={class:"description color-text_colors-secondary"},ne={class:"mt-auto pt1"},ie={class:"details-item"},re={key:0,class:"my-2 color-text_colors-secondary"},le={class:"mr-2"},ce={class:"docs-links"},de={key:0,class:"details-item"},ue={key:1,class:"details-item"};function ge(e,t,a,h,g,v){const n=c("KSkeletonBox"),s=c("router-link"),p=c("KBadge"),i=c("KIcon"),b=c("KCard");return o(),m(b,{class:"show-docs"},{title:f(()=>[a.loading?(o(),d("p",ae,[l(n,{width:"10"})])):(o(),m(s,{key:1,to:`/spec/${a.product.id}`},{default:f(()=>[r("p",oe,u(a.product.title),1)]),_:1},8,["to"]))]),body:f(()=>[r("p",se,[a.loading?(o(),d(B,{key:0},[l(n,{width:"100"}),l(n,{width:"50"}),l(n,{width:"75"})],64)):(o(),d(B,{key:1},[k(u(a.product.description),1)],64))]),r("ul",ne,[r("li",ie,[v.version?(o(),d("span",re,[a.loading?(o(),m(n,{key:0,width:"2"})):(o(),d(B,{key:1},[r("span",le,u(g.helpText.latestVersion),1),l(p,{color:"var(--text_colors-secondary)","background-color":"var(--section_colors-accent)",class:"product-version"},{default:f(()=>[k(u(v.version.name),1)]),_:1})],64))])):P("",!0)]),r("li",ce,[a.product.showSpecLink?(o(),d("div",de,[a.loading?(o(),m(n,{key:0,width:"50"})):(o(),m(s,{key:1,to:{name:"spec",params:{product:a.product.id}},class:"link"},{default:f(()=>[k(u(g.helpText.specificationLink)+" ",1),l(i,{icon:"arrowRight",size:"16",color:"var(--text_colors-link)",class:"link-icon"})]),_:1},8,["to"]))])):P("",!0),a.product.documentCount?(o(),d("div",ue,[a.loading?(o(),m(n,{key:0,width:"50"})):(o(),m(s,{key:1,to:{name:"api-documentation-page",params:{product:a.product.id}},class:"link"},{default:f(()=>[k(u(g.helpText.documentationLink)+" ",1),l(i,{icon:"arrowRight",size:"16",color:"var(--text_colors-link)",class:"link-icon"})]),_:1},8,["to"]))])):P("",!0)])])]),_:1})}const pe=$(te,[["render",ge],["__scopeId","data-v-9c304143"]]),he={name:"CatalogCardList",components:{CatalogItem:pe},props:{products:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}}},me={class:"container max-w-screen-2xl mx-auto catalog-card-view"},fe={class:"w-full grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5"};function ve(e,t,a,h,g,v){const n=c("CatalogItem");return o(),d("div",me,[r("div",fe,[(o(!0),d(B,null,H(a.products,(s,p)=>(o(),m(n,{key:s.id+p,class:"catalog-item",product:s,"has-documentation":s.documentCount>0,loading:a.loading},null,8,["product","has-documentation","loading"]))),128))])])}const _e=$(he,[["render",ve]]),ye=x({name:"PaginationBar",props:{totalCount:{type:Number,default:0},pageSize:{type:Number,default:12},searchTriggered:Boolean},emits:["pageChanged"],data(){return{currentPage:1,buttonDisabled:"pageBack"}},watch:{searchTriggered(e){e===!0&&this.returnToFirstPage()}},methods:{getPaginationString(){let e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return e++,t>this.totalCount&&(t=this.totalCount),e+" - "+t+" of "+this.totalCount},pageForward(){if(this.buttonDisabled==="pageForward")return;this.currentPage++,(this.currentPage-1)*this.pageSize+this.pageSize>=this.totalCount?this.buttonDisabled="pageForward":this.buttonDisabled="",this.$emit("pageChanged",this.currentPage)},pageBack(){this.buttonDisabled!=="pageBack"&&(this.currentPage--,this.currentPage===1?this.buttonDisabled="pageBack":this.buttonDisabled="",this.$emit("pageChanged",this.currentPage))},returnToFirstPage(){this.buttonDisabled="pageBack",this.currentPage=1,this.$emit("pageChanged",this.currentPage)},goToLastPage(){this.buttonDisabled="pageForward",this.currentPage=Math.ceil(this.totalCount/this.pageSize),this.$emit("pageChanged",this.currentPage)}}}),ke={key:0,class:"card-pagination-bar flex items-center justify-end"},we={class:"pagination-text type-lg color-text_colors-secondary mr-4"};function be(e,t,a,h,g,v){const n=c("KIcon");return!e.searchTriggered&&e.totalCount>e.pageSize?(o(),d("div",ke,[r("span",we,u(e.getPaginationString()),1),r("div",null,[r("button",{class:V(["pagination-button",e.buttonDisabled==="pageBack"?"disabled":""]),"data-testid":"pagination-first",onClick:t[0]||(t[0]=(...s)=>e.returnToFirstPage&&e.returnToFirstPage(...s))},[l(n,{width:"16",height:"16","view-box":"0 0 16 16",icon:"collapseExpand"})],2),r("button",{class:V(["pagination-button",e.buttonDisabled==="pageBack"?"disabled":""]),"data-testid":"pagination-backwards",onClick:t[1]||(t[1]=(...s)=>e.pageBack&&e.pageBack(...s))},[l(n,{width:"16",height:"16","view-box":"0 0 16 8",icon:"back"})],2),r("button",{class:V(["pagination-button",e.buttonDisabled==="pageForward"?"disabled":""]),"data-testid":"pagination-forwards",onClick:t[2]||(t[2]=(...s)=>e.pageForward&&e.pageForward(...s))},[l(n,{width:"16",height:"16","view-box":"0 0 16 8",icon:"forward"})],2),r("button",{class:V(["pagination-button",e.buttonDisabled==="pageForward"?"disabled":""]),"data-testid":"pagination-last",onClick:t[3]||(t[3]=(...s)=>e.goToLastPage&&e.goToLastPage(...s))},[l(n,{icon:"collapseExpand",class:"kong-pag-last",width:"16",height:"16","view-box":"0 0 16 16"})],2)])])):P("",!0)}const Ce=$(ye,[["render",be],["__scopeId","data-v-d5c696bf"]]),Pe=x({name:"CatalogTableList",props:{products:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){const t=O(),a=I().state.helpText.catalogTable,h=_(0),g=U(()=>h.value.toString()),v=()=>{h.value+=1};function n(p,i){t.push({path:`/spec/${i.id}`})}function s(){return{total:e.products.length,data:e.products}}return W(()=>e.products,()=>{v()},{deep:!0}),{handleRowClick:n,fetcher:s,fetcherCacheKey:g,helpText:a}},data(){return{tableHeaders:[{label:"Title",key:"title"},{label:"Description",key:"description"},{label:"Latest Version",key:"latestVersion"},{label:"Details",key:"links"}]}}}),Te={class:"max-w-screen-2xl mx-auto"};function $e(e,t,a,h,g,v){const n=c("KBadge"),s=c("router-link"),p=c("KTable");return o(),d("div",Te,[l(p,{fetcher:e.fetcher,"fetcher-cache-key":e.fetcherCacheKey,"has-side-border":"",headers:e.tableHeaders,"is-small":"","is-loading":e.loading,"is-clickable":"","disable-pagination":"","onRow:click":e.handleRowClick},{title:f(({rowValue:i})=>[k(u(i),1)]),latestVersion:f(({row:i})=>[r("div",null,[i.latestVersion?(o(),m(n,{key:0,color:"var(--text_colors-secondary)","background-color":"var(--section_colors-accent)",class:"product-version"},{default:f(()=>[k(u(i.latestVersion.name),1)]),_:2},1024)):P("",!0)])]),links:f(({row:i})=>[i.showSpecLink?(o(),m(s,{key:0,to:{name:"spec",params:{product:i.id}},class:"link"},{default:f(()=>[k(u(e.helpText.specificationLink),1)]),_:2},1032,["to"])):P("",!0),i.documentCount?(o(),m(s,{key:1,to:{name:"api-documentation-page",params:{product:i.id}},class:"link"},{default:f(()=>[k(u(e.helpText.documentationLink),1)]),_:2},1032,["to"])):P("",!0)]),_:1},8,["fetcher","fetcher-cache-key","headers","is-loading","onRow:click"])])}const Be=$(Pe,[["render",$e],["__scopeId","data-v-ea5f181e"]]),Se=x({name:"Catalog",components:{CatalogCardList:_e,CatalogTableList:Be,PaginationBar:Ce,EmptyState:ee},props:{catalogItems:{type:Array,default:()=>[]},cardsPerPage:{type:Number,default:12},totalCount:{type:Number,default:0},searchTriggered:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["list-page-changed","active-view-changed"],setup(){const e=I().state.helpText.catalog,t=e.entityTypeProduct,a=e.noResultsProduct;return{helpText:e,catalogTitle:t,noResultsMessage:a}},data(){return{activeView:"grid"}},computed:{disabled(){return this.catalogItems.length===0?!0:null}},mounted(){const e=localStorage.getItem("portal-catalog-view")||"grid";this.setActiveView(e)},methods:{setActiveView(e){this.activeView=e,localStorage.setItem("portal-catalog-view",e),this.$emit("active-view-changed",e)}}}),Ve={class:"products-content px-5"},Ie={class:"container max-w-screen-2xl mx-auto mt-6 mb-5 flex justify-between"},xe={class:"products-label"},Ke={key:0,class:"product-catalog-empty-state"},Le={class:"product-catalog-no-products type-lg color-text_colors-secondary"},Fe={key:1,class:"product-catalog-loading-spinner"},Ae={key:1,class:"list-wrapper"};function ze(e,t,a,h,g,v){const n=c("KViewSwitcher"),s=c("EmptyState"),p=c("KSkeleton"),i=c("CatalogCardList"),b=c("CatalogTableList"),K=c("PaginationBar");return o(),d("div",Ve,[r("div",Ie,[r("span",xe,u(e.catalogTitle),1),l(n,{"data-testid":"view-switcher",disabled:e.disabled,view:e.activeView,onViewChanged:e.setActiveView},null,8,["disabled","view","onViewChanged"])]),e.catalogItems.length?(o(),d("div",Ae,[e.activeView=="grid"?(o(),m(i,{key:0,products:e.catalogItems,loading:e.loading},null,8,["products","loading"])):(o(),m(b,{key:1,products:e.catalogItems,loading:e.loading},null,8,["products","loading"])),l(K,{class:"pagination-bar container max-w-screen-2xl mx-auto","page-size":e.cardsPerPage,"total-count":e.totalCount,"search-triggered":e.searchTriggered,onPageChanged:t[0]||(t[0]=T=>e.$emit("list-page-changed",T))},null,8,["page-size","total-count","search-triggered"])])):(o(),d("div",Ke,[r("div",Le,[e.loading?(o(),d("div",Fe,[l(p,{"delay-milliseconds":0})])):(o(),d(B,{key:0},[l(s,{class:"mb-2 mx-auto"}),k(" "+u(e.noResultsMessage),1)],64))])]))])}const De=$(Se,[["render",ze],["__scopeId","data-v-8f373fa6"]]);function Re(e,t=300){let a;return function(...h){const g=this;a&&clearTimeout(a),a=setTimeout(function(){e.apply(g,h),a=null},t)}}const Ne=x({name:"ProductCatalogWrapper",components:{Catalog:De},setup(){const e=_({backgroundImage:""}),t=_(""),a=_(""),h=_(12),g=_(""),v=_([]),n=_(void 0),s=_(!0),p=_(!1),i=_(void 0),b=_(1),K=I().state.helpText.products,{portalApiV2:T}=j(),D=async()=>T.value.service.portalApi.getPortalAppearance().then(y=>{const C=y.data.variables.catalog;if(C.welcome_message&&(t.value=C.welcome_message.text),C.primary_header&&(a.value=C.primary_header.text),C.cover){const F=T.value.getApiLink("/api/v2/portal/catalog-cover");e.value.backgroundImage=`url(${F})`}}).catch(y=>{console.error("Failed to load appearance.",y)}).then(R),R=()=>{t.value||(t.value="Welcome to our API Portal!"),a.value||(a.value="Start building and innovating with our APIs")},N=Re(async()=>{p.value=!0,b.value=1;try{return await L()}finally{p.value=!1}}),L=async()=>{s.value=!0;try{try{const{data:y}=await T.value.service.searchApi.searchPortalEntities({indices:"product-catalog",q:g.value,pageNumber:b.value,pageSize:h.value,join:"versions"}),{data:C,meta:F}=y;v.value=await Promise.all(C.map(async({source:w})=>{let S=!1;return w.latest_version&&await T.value.service.versionsApi.getProductVersionSpec({productId:w.id,productVersionId:w.latest_version.id}).then(A=>{A.status===200?S=!0:A.status===204&&(S=!1)}).catch(()=>{S=!1}),{id:w.id,title:w.name,latestVersion:w.latest_version,showSpecLink:S,description:w.description,documentCount:w.document_count,versionCount:w.version_count}})),n.value=F.page.total}catch(y){console.error("failed to find Service Packages",y)}}finally{s.value=!1}},E=y=>{i.value=y},M=y=>{b.value=y,p.value||L()};return q(async()=>{await Promise.all([D(),L()])}),{catalog_cover_style:e,welcome_message:t,primary_header:a,cardsPerPage:h,searchString:g,catalogItems:v,totalCount:n,loading:s,searchTriggered:p,catalogView:i,catalogPageNumber:b,helpText:K,searchProducts:N,catalogViewChanged:E,catalogPageChanged:M}}}),Ee={class:"dev-portal-products"},Me={class:"products-welcome mb-4 font-normal color-text_colors-secondary text-2xl"},je={class:"products-title mb-5 font-normal color-text_colors-hero text-4xl"},Ge={class:"w-full max-w-lg mx-auto inline-flex"};function He(e,t,a,h,g,v){const n=c("KInput"),s=c("KButton"),p=c("Catalog");return o(),d("div",Ee,[r("div",{class:"products-top-section flex flex-col items-center justify-center py-16 bg-section_colors-hero",style:J(e.catalog_cover_style)},[r("h4",Me,u(e.welcome_message),1),r("h1",je,u(e.primary_header),1),r("div",Ge,[r("form",{id:"searchProductsForm",onSubmit:t[1]||(t[1]=z((...i)=>e.searchProducts&&e.searchProducts(...i),["prevent"])),onReset:t[2]||(t[2]=z((...i)=>e.searchProducts&&e.searchProducts(...i),["prevent"]))},[l(n,{modelValue:e.searchString,"onUpdate:modelValue":t[0]||(t[0]=i=>e.searchString=i),class:"k-input--full",size:"small",type:"search",placeholder:e.helpText.search,"data-testid":"catalog-search",form:"searchProductsForm",onInput:e.searchProducts},null,8,["modelValue","placeholder","onInput"]),l(s,{form:"searchProductsForm",appearance:"primary","data-testid":"catalog-search-button",type:"submit",size:"small",disabled:e.loading,"is-rounded":!1},{default:f(()=>[k(u(e.searchString!==""&&e.loading?e.helpText.searching:e.helpText.search),1)]),_:1},8,["disabled"])],32)])],4),l(p,{"catalog-items":e.catalogItems,"cards-per-page":e.cardsPerPage,"total-count":e.totalCount,"search-triggered":e.searchTriggered,loading:e.loading,onActiveViewChanged:e.catalogViewChanged,onListPageChanged:e.catalogPageChanged},null,8,["catalog-items","cards-per-page","total-count","search-triggered","loading","onActiveViewChanged","onListPageChanged"])])}const qe=$(Ne,[["render",He]]);export{qe as default};
